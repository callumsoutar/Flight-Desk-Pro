{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/callumsoutar/flightdeskpro/src/components/bookings/client-booking-check-in-view.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from 'react';\nimport { PeopleCard } from '@/components/bookings/people-card';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { BookingStages } from '@/components/bookings/booking-stages';\nimport { Booking } from '@/types/bookings';\nimport { BookingCheckInCard } from '@/components/bookings/booking-check-in-card';\nimport { TabsInline } from './tabs-inline';\nimport { AuditLogsTable } from '@/components/audit-logs/audit-logs-table';\nimport { LogIn, Plane, MoreVertical, Mail, CalendarClock, XCircle } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport { DropdownMenu, DropdownMenuTrigger, DropdownMenuContent, DropdownMenuItem } from '@/components/ui/dropdown-menu';\nimport { Tooltip, TooltipProvider, TooltipTrigger, TooltipContent } from '@/components/ui/tooltip';\nimport { AnimatePresence, motion } from 'framer-motion';\n\nfunction StatusBadge({ status }: { status: string }) {\n  const colorMap: Record<string, string> = {\n    unconfirmed: 'bg-yellow-100 text-yellow-900 border border-yellow-300',\n    confirmed: 'bg-green-100 text-green-900 border border-green-300',\n    briefing: 'bg-blue-100 text-blue-900 border border-blue-300',\n    flying: 'bg-purple-100 text-purple-900 border border-purple-300',\n    complete: 'bg-blue-900 text-white border border-blue-900',\n    default: 'bg-gray-100 text-gray-700 border border-gray-300',\n  };\n  return (\n    <span\n      className={`inline-flex items-center px-4 py-1 text-base rounded-full font-bold shadow-md transition-colors duration-200 border ${colorMap[status] || colorMap.default}`}\n      style={{ letterSpacing: '0.02em', minHeight: '2.25rem' }}\n    >\n      {status.charAt(0).toUpperCase() + status.slice(1)}\n    </span>\n  );\n}\n\nconst STAGES = [\n  { key: 'briefing', label: 'Briefing' },\n  { key: 'checkout', label: 'Check-out' },\n  { key: 'debrief', label: 'Flying' },\n  { key: 'checkin', label: 'Check-in' },\n];\nconst STATUS_TO_STAGE_IDX: Record<string, number> = {\n  unconfirmed: -1,\n  confirmed: -1,\n  briefing: 0,\n  flying: 1,\n  debrief: 2,\n  checkin: 3,\n  complete: 3,\n};\n\n// Beautiful Invoice Generator Table\nfunction InvoiceGenerator({ items, onEdit }: { items: { description: string; quantity: number; rate: number; total: number; }[], onEdit: (idx: number, updated: { description: string; quantity: number; rate: number; total: number; }) => void }) {\n  const [editIdx, setEditIdx] = useState<number | null>(null);\n  const [editItem, setEditItem] = useState<{ description: string; quantity: number; rate: number; total: number; } | null>(null);\n  const total = items.reduce((sum, item) => sum + item.total, 0);\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.4, ease: 'easeOut' }}\n      className=\"bg-white/90 border border-slate-100 rounded-2xl p-8 w-full flex flex-col items-center relative\"\n    >\n      <div className=\"font-bold text-xl mb-6 tracking-tight text-slate-800\">Invoice</div>\n      <div className=\"w-full overflow-x-auto\">\n        <table className=\"w-full text-sm rounded-xl overflow-hidden\">\n          <thead>\n            <tr className=\"border-b border-slate-200\">\n              <th className=\"text-left font-semibold py-2 px-2\">Description</th>\n              <th className=\"text-right font-semibold py-2 px-2\">Qty</th>\n              <th className=\"text-right font-semibold py-2 px-2\">Rate</th>\n              <th className=\"text-right font-semibold py-2 px-2\">Total</th>\n              <th className=\"text-center font-semibold py-2 px-2 w-12\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            <AnimatePresence initial={false}>\n              {items.length === 0 ? (\n                <tr><td colSpan={5} className=\"text-center text-muted-foreground py-4 text-base\">No items</td></tr>\n              ) : items.map((item, i) => (\n                <motion.tr\n                  key={i}\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  transition={{ duration: 0.3 }}\n                  className={i % 2 === 0 ? 'bg-white' : 'bg-slate-50'}\n                >\n                  {editIdx === i ? (\n                    <>\n                      <td className=\"py-2 px-2 font-medium text-slate-700\">\n                        <input\n                          className=\"border rounded px-3 py-2 w-full text-sm\"\n                          value={editItem?.description ?? ''}\n                          onChange={e => setEditItem({ ...editItem!, description: e.target.value })}\n                        />\n                      </td>\n                      <td className=\"py-2 px-2 text-right\">\n                        <input\n                          type=\"number\"\n                          min={0}\n                          step={0.01}\n                          className=\"border rounded px-3 py-2 w-24 text-sm text-right\"\n                          value={editItem?.quantity ?? 0}\n                          onChange={e => setEditItem({ ...editItem!, quantity: Number(e.target.value), total: Number(e.target.value) * (editItem?.rate ?? 0) })}\n                        />\n                      </td>\n                      <td className=\"py-2 px-2 text-right\">\n                        <input\n                          type=\"number\"\n                          min={0}\n                          step={0.01}\n                          className=\"border rounded px-3 py-2 w-28 text-sm text-right\"\n                          value={editItem?.rate ?? 0}\n                          onChange={e => setEditItem({ ...editItem!, rate: Number(e.target.value), total: (editItem?.quantity ?? 0) * Number(e.target.value) })}\n                        />\n                      </td>\n                      <td className=\"py-2 px-2 text-right font-semibold\">\n                        <input\n                          type=\"number\"\n                          min={0}\n                          step={0.01}\n                          className=\"border rounded px-3 py-2 w-32 text-sm text-right\"\n                          value={editItem?.total ?? 0}\n                          onChange={e => setEditItem({ ...editItem!, total: Number(e.target.value) })}\n                        />\n                      </td>\n                      <td className=\"py-2 px-2 text-center flex gap-1\">\n                        <Button size=\"sm\" variant=\"outline\" className=\"px-2 py-1 text-xs\" onClick={() => { onEdit(i, editItem!); setEditIdx(null); setEditItem(null); }}>Save</Button>\n                        <Button size=\"sm\" variant=\"ghost\" className=\"px-2 py-1 text-xs\" onClick={() => { setEditIdx(null); setEditItem(null); }}>Cancel</Button>\n                      </td>\n                    </>\n                  ) : (\n                    <>\n                      <td className=\"py-2 px-2 font-medium text-slate-700\">{item.description}</td>\n                      <td className=\"py-2 px-2 text-right\">{item.quantity}</td>\n                      <td className=\"py-2 px-2 text-right\">${item.rate.toFixed(2)}</td>\n                      <td className=\"py-2 px-2 text-right font-semibold\">${item.total.toFixed(2)}</td>\n                      <td className=\"py-2 px-2 text-center\">\n                        <Button size=\"icon\" variant=\"ghost\" className=\"p-1\" onClick={() => { setEditIdx(i); setEditItem(item); }}>\n                          <svg width=\"16\" height=\"16\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"feather feather-edit\"><path d=\"M11 4l2.1 2.1M4 13.5V16h2.5l7.1-7.1a2 2 0 0 0 0-2.8l-2.1-2.1a2 2 0 0 0-2.8 0L4 13.5z\"/></svg>\n                        </Button>\n                      </td>\n                    </>\n                  )}\n                </motion.tr>\n              ))}\n            </AnimatePresence>\n          </tbody>\n        </table>\n      </div>\n      <div className=\"w-full border-t border-slate-200 my-4\" />\n      <div className=\"flex justify-between w-full font-bold text-xl mb-2\">\n        <span>Total</span>\n        <span>${total.toFixed(2)}</span>\n      </div>\n      <Button className=\"w-full rounded-full mt-2\">\n        Save Invoice\n      </Button>\n    </motion.div>\n  );\n}\n\nexport function ClientBookingCheckInView({ booking, title }: { booking: Booking, title?: string }) {\n  const [tab, setTab] = useState('flight-details');\n  const [invoiceItems, setInvoiceItems] = useState<{ description: string; quantity: number; rate: number; total: number; }[]>([]);\n  const router = useRouter();\n\n  // Handler to update a line item\n  const handleEditInvoiceItem = (idx: number, updated: { description: string; quantity: number; rate: number; total: number; }) => {\n    setInvoiceItems(items => items.map((item, i) => i === idx ? updated : item));\n  };\n\n  return (\n    <div className=\"w-full min-h-screen bg-white flex flex-col items-center\">\n      <div className=\"w-full max-w-6xl px-4 pt-8 pb-12 flex flex-col gap-8\">\n        {/* Breadcrumbs and Page Title, Status, and Tabs */}\n        <div className=\"flex flex-col gap-1 mb-2\">\n          <div className=\"text-xs text-muted-foreground font-medium mb-3\">\n            Bookings / Check In\n          </div>\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n            <div className=\"flex flex-col gap-0.5\">\n              <div className=\"flex items-center gap-3\">\n                <h1 className=\"text-4xl font-extrabold tracking-tight text-slate-900 flex items-center\">{title || 'Flight Check-In'}</h1>\n                <span className=\"ml-2\"><StatusBadge status={booking.status} /></span>\n                {booking.aircraft?.registration && (\n                  <>\n                    <span className=\"mx-2 text-slate-300 text-lg\">|</span>\n                    <a\n                      href={`/aircraft/view/${booking.aircraft.id}`}\n                      className=\"flex items-center gap-1 text-blue-600 underline hover:text-blue-800 transition-colors text-base font-medium cursor-pointer\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      <Plane className=\"w-4 h-4 inline-block text-blue-500\" />\n                      {booking.aircraft.registration}\n                    </a>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}